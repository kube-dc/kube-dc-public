kubeApiExternalUrl: "" # Required, example: "kube-api.stage.kube-dc.com:6443"

manager:
  logLevel: 1 # 5 - Debug
  keycloakDebug: false
  ovnDbIps: "" # Required, example: "tcp:192.168.0.1:6641"
  extraEnv: []
    # - name: EXAMPLE_VAR
    #   value: "example-value"
    # - name: SECRET_VAR
    #   valueFrom:
    #     secretKeyRef:
    #       name: mysecret
    #       key: secretkey

  kubernetesAuthConfig:
    path: /etc/rancher
    filename: auth-conf.yaml

  keycloakSecret: {}
    # url: <KEYCLOAK_URL>
    # user: <KEYCLOAK_USER>
    # password: <KEYCLOAK_PASSWORD>
    # masterRealm: <KEYCLOAK_MASTER_REALM_NAME>
    # consoleUrl: <KUBE_DC_CONSOLE_URL>

  image:
    repository: shalb/kube-dc-manager
    pullPolicy: IfNotPresent
    tag: "v0.1.35"

  imagePullSecrets: []
  nameOverride: ""
  fullnameOverride: ""

  serviceAccount:
    automount: true
    annotations: {}
    name: ""

  podAnnotations: {}
  podLabels: {}

  podSecurityContext: {}
    # fsGroup: 2000

  securityContext: {}
  nodeSelector:
    kube-dc-manager: "true"


frontend:
  replicaCount: 1
  # Extra environment variables for the container
  extraEnv: []
    # - name: EXAMPLE_VAR
    #   value: "example-value"
    # - name: SECRET_VAR
    #   valueFrom:
    #     secretKeyRef:
    #       name: mysecret
    #       key: secretkey
  
  # Extra JavaScript environment variables for the frontend application
  # These will be available as window.VARIABLE_NAME in the frontend code
  extraJsEnv: {}
    # apiVersion: "v1"
    # featureNewUI: "true"
    # authTimeout: "3600"
  image:
    repository: shalb/kube-dc-ui-frontend
    pullPolicy: IfNotPresent
    tag: "v0.1.35"

  imagePullSecrets: []
  nameOverride: ""
  fullnameOverride: ""

  serviceAccount:
    automount: true
    annotations: {}
    name: ""

  podAnnotations: {}
  podLabels: {}

  podSecurityContext: {}
    # fsGroup: 2000

  securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  service:
    type: ClusterIP
    port: 8080

  gateway:
    hostname: "" # Required: Set to your frontend hostname, e.g., console.example.com
    parentRef:
      name: eg
      namespace: envoy-gateway-system

  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  livenessProbe:
    httpGet:
      path: /
      port: 80
    timeoutSeconds: 5
    periodSeconds: 10
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /
      port: 80
    timeoutSeconds: 5
    periodSeconds: 10
    failureThreshold: 3

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

  volumes: []
  # - name: foo
  #   secret:
  #     secretName: mysecret
  #     optional: false

  volumeMounts: []
  # - name: foo
  #   mountPath: "/etc/foo"
  #   readOnly: true

  nodeSelector: {}

  tolerations: []

  affinity: {}

backend:
  # Note: keycloakUrl, consoleUrl, appUrl are read from master-config secret
  
  # SMTP configuration for email notifications (all required for email to work)
  smtp:
    enabled: false
    host: "" # e.g., "smtp.gmail.com"
    port: "587"
    secure: "false" # "true" for port 465
    user: "" # SMTP username
    password: "" # SMTP password (use secret reference in production)
    from: "" # e.g., "noreply@example.com"
    fromName: "Kube-DC"
  
  replicaCount: 1
  extraEnv: []
      # - name: PROM_URL
      #   value: "http://prometheus:9090"
  image:
    repository: shalb/kube-dc-ui-backend
    pullPolicy: IfNotPresent
    tag: "v0.1.35"

  imagePullSecrets: []
  nameOverride: ""
  fullnameOverride: ""

  serviceAccount:
    automount: true
    annotations: {}
    name: ""

  podAnnotations: {}
  podLabels: {}

  podSecurityContext: {}
    # fsGroup: 2000

  securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  service:
    type: ClusterIP
    port: 8080

  gateway:
    hostname: "" # Required: Set to your backend hostname, e.g., backend.example.com
    parentRef:
      name: eg
      namespace: envoy-gateway-system

  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  livenessProbe:
    httpGet:
      path: /
      port: 3333
    timeoutSeconds: 5
    periodSeconds: 10
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /
      port: 3333
    timeoutSeconds: 5
    periodSeconds: 10
    failureThreshold: 3

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

  # Additional volumes on the output Deployment definition.
  volumes: []
  # - name: foo
  #   secret:
  #     secretName: mysecret
  #     optional: false

  # Additional volumeMounts on the output Deployment definition.
  volumeMounts: []
  # - name: foo
  #   mountPath: "/etc/foo"
  #   readOnly: true

  nodeSelector: {}

  tolerations: []

  affinity: {}

# k8-manager - Kubernetes cluster management controller
k8Manager:
  enabled: true
  replicaCount: 1

  image:
    repository: shalb/kube-dc-k8-manager
    pullPolicy: IfNotPresent
    tag: "latest"

  # External endpoint for the infrastructure cluster API
  # Required for CCMs running in VPC-isolated namespaces that cannot reach kubernetes.default.svc
  # Format: "host:port" (e.g., "kube-api.stage.kube-dc.com:6443")
  infraAPIEndpoint: ""

  # Kamaji datastore configuration
  kamajiDatastoreName: "default"
  kamajiDatastoreNamespace: "kamaji-system"

  # Enable metrics endpoint
  metricsEnabled: false

  # Extra arguments for the manager
  extraArgs: []

  # Extra environment variables
  extraEnv: []

  resources:
    limits:
      cpu: 500m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}

# Billing configuration
billing:
  # Billing provider: "none" (quota-only), "stripe", or "whmcs"
  provider: "none"

  # Stripe-specific settings (only used when provider=stripe)
  stripe:
    # Name of the K8s Secret created by hack/bootstrap-stripe.sh
    # Contains STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET, and STRIPE_PRICE_* keys
    secretName: "stripe-billing"

  # billing-plans ConfigMap — deployed when enabled
  # Required by both the Go controller (organization quotas) and the UI backend (plan display)
  plans:
    enabled: false
    config: |
      plans:
        dev-pool:
          displayName: "Dev Pool"
          description: "Best for: Sandbox / Dev"
          price: 19
          currency: "EUR"
          recommended: false
          objectStorage: 20
          ipv4: 1
          features:
            - "4 vCPU"
            - "8 GB RAM"
            - "60 GB NVMe Storage"
            - "20 GB Object Storage included"
            - "1 Dedicated IPv4"
            - "Nested Clusters (KubeVirt)"
            - "Unlimited 1Gbit/s Bandwidth"
          requests:
            cpu: "2"
            memory: "4Gi"
            storage: "60Gi"
          pods: 100
          servicesLB: 100
          burstRatio: 2.0
            limitRange:
              defaultCPU: "500m"
              defaultMemory: "512Mi"
              defaultRequestCPU: "100m"
              defaultRequestMem: "128Mi"
              maxCPU: "4"
              maxMemory: "8Gi"
              minCPU: "1m"
              minMemory: "1Mi"
              maxPodCPU: "4"
              maxPodMemory: "8Gi"
              maxPVCStorage: "60Gi"
              minPVCStorage: "10Mi"
          pro-pool:
            displayName: "Pro Pool"
            description: "Best for: Production / Teams"
            price: 49
            currency: "EUR"
            recommended: true
            objectStorage: 100
            ipv4: 1
            features:
              - "8 vCPU"
              - "24 GB RAM"
              - "160 GB NVMe Storage"
              - "100 GB Object Storage included"
              - "1 Dedicated IPv4"
              - "Nested Clusters (KubeVirt)"
              - "Unlimited 1Gbit/s Bandwidth"
            requests:
              cpu: "6"
              memory: "18Gi"
              storage: "160Gi"
            pods: 200
            servicesLB: 100
            burstRatio: 1.34
            limitRange:
              defaultCPU: "500m"
              defaultMemory: "512Mi"
              defaultRequestCPU: "250m"
              defaultRequestMem: "256Mi"
              maxCPU: "8"
              maxMemory: "24Gi"
              minCPU: "1m"
              minMemory: "1Mi"
              maxPodCPU: "8"
              maxPodMemory: "24Gi"
              maxPVCStorage: "160Gi"
              minPVCStorage: "10Mi"
        scale-pool:
          displayName: "Scale Pool"
          description: "Best for: High Load / VDC"
          price: 99
          currency: "EUR"
          recommended: false
          objectStorage: 500
          ipv4: 3
          features:
            - "16 vCPU"
            - "56 GB RAM"
            - "320 GB NVMe Storage"
            - "500 GB Object Storage included"
            - "3 Dedicated IPv4"
            - "Nested Clusters (KubeVirt)"
            - "Unlimited 1Gbit/s Bandwidth"
          requests:
            cpu: "12"
            memory: "42Gi"
            storage: "320Gi"
          pods: 500
          servicesLB: 100
          burstRatio: 1.34
          limitRange:
            defaultCPU: "1"
            defaultMemory: "1Gi"
            defaultRequestCPU: "500m"
            defaultRequestMem: "512Mi"
            maxCPU: "16"
            maxMemory: "56Gi"
            minCPU: "1m"
            minMemory: "1Mi"
            maxPodCPU: "16"
            maxPodMemory: "56Gi"
            maxPVCStorage: "320Gi"
            minPVCStorage: "10Mi"
      suspendedPlan:
        cpu: "500m"
        memory: "1Gi"
        pods: 10
        servicesLB: 0
      systemOverhead:
        cpuPerProject: 0
        memPerProject: 0
      addons:
        turbo-x1:
          displayName: "Turbo x1"
          description: "+4 GB RAM • +2 vCPU (Burst)"
          price: 9
          currency: "EUR"
          cpu: "2"
          memory: "4Gi"
          storage: "20Gi"
        turbo-x2:
          displayName: "Turbo x2"
          description: "+8 GB RAM • +4 vCPU (Burst)"
          price: 16
          currency: "EUR"
          cpu: "4"
          memory: "8Gi"
          storage: "40Gi"
      eipQuota:
        dev-pool: 1
        pro-pool: 1
        scale-pool: 3

# Auth Config Sync DaemonSet - syncs auth config from ConfigMap to control-plane nodes
# This ensures OIDC authentication config is available on all API server nodes
authConfigSync:
  enabled: true
  image:
    repository: busybox
    tag: "1.36"
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: 50m
      memory: 32Mi
    requests:
      cpu: 10m
      memory: 16Mi
